# Dev overrides: portas expostas, hot-reload
services:
  brain:
    build:
      context: ./brain
      target: dev
    environment:
      PUBLIC_BASE_URL: 'http://localhost:8000'
      WHISPER_ENABLED: 'false'
    volumes:
      - ./brain/src:/app/src:ro # hot-reload via volume mount
    command:
      [
        'uv',
        'run',
        'uvicorn',
        'main:app',
        '--host',
        '0.0.0.0',
        '--port',
        '8000',
        '--reload',
      ]

  postgres:
    ports:
      - '5432:5432'

  redis:
    ports:
      - '6379:6379'
